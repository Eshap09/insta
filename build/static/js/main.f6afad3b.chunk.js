(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{52:function(e,t,a){},56:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(5),s=a(2),c=a(18),o=a.n(c),r=a(15),i=a(85),l=a(87),u=a(86),p=a(84),j=(a(52),a(23)),m=j.a.initializeApp({apiKey:"AIzaSyAJRE2yxYAnEHFaGc8Nx7u0QK4ww6JnRBA",authDomain:"instagram-clone-de48b.firebaseapp.com",projectId:"instagram-clone-de48b",storageBucket:"instagram-clone-de48b.appspot.com",messagingSenderId:"1023219403286",appId:"1:1023219403286:web:4f6b77e9712225f99bc337",measurementId:"G-J61FVS6XYV"}).firestore(),d=j.a.auth(),b=j.a.storage();a(56);var g=function(e){var t=e.username,a=Object(s.useState)(""),c=Object(r.a)(a,2),o=c[0],i=c[1],l=Object(s.useState)(null),p=Object(r.a)(l,2),d=p[0],g=p[1],O=Object(s.useState)(""),h=Object(r.a)(O,2),f=(h[0],h[1],Object(s.useState)(0)),x=Object(r.a)(f,2),v=x[0],_=x[1];return Object(n.jsxs)("div",{className:"ImageUpload",children:[Object(n.jsx)("progress",{className:"ImageUpload__progress",value:v,max:"100"}),Object(n.jsx)("input",{type:"text",placeholder:"Enter a Caption",onChange:function(e){return i(e.target.value)}}),Object(n.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&g(e.target.files[0])}}),Object(n.jsx)(u.a,{onClick:function(){b.ref("images/".concat(d.name)).put(d).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);_(t)}),(function(e){console.log(e),alert(e.message)}),(function(){b.ref("images").child(d.name).getDownloadURL().then((function(e){m.collection("posts").add({timestamp:j.a.firestore.FieldValue.serverTimestamp(),caption:o,imgUrl:e,username:t}),_(0),i(""),g(null)}))}))},variant:"contained",color:"secondry",children:"Upload"})]})},O=(a(61),a(88));var h=function(e){var t=e.username,a=e.user,c=e.caption,o=e.imageUrl,i=e.postid,p=Object(s.useState)([]),d=Object(r.a)(p,2),b=d[0],g=d[1],h=Object(s.useState)(""),f=Object(r.a)(h,2),x=f[0],v=f[1];return Object(s.useEffect)((function(){var e;return i&&(e=m.collection("posts").doc(i).collection("comments").orderBy("timestamp","asc").onSnapshot((function(e){g(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[i]),console.log({Comments:b}),Object(n.jsxs)("div",{className:"post",children:[Object(n.jsxs)("div",{className:"post__header",children:[Object(n.jsx)(O.a,{className:"post__avatar",alt:t,src:"/static/images/avatar/1.jpg"}),Object(n.jsx)("h3",{children:t})]}),Object(n.jsx)("img",{className:"post__image",src:o,alt:""}),Object(n.jsxs)("h4",{className:"post__text",children:[Object(n.jsxs)("strong",{children:[t," "]}),c]}),Object(n.jsx)("div",{className:"post__comments",children:b.map((function(e){return Object(n.jsx)("div",{className:"post__everycomments",children:Object(n.jsxs)("p",{children:[Object(n.jsx)("strong",{className:"post__textstrong",children:e.username})," ",e.text]})})}))}),a&&Object(n.jsxs)("form",{className:"post__commentbox",children:[Object(n.jsx)(l.a,{className:"post__input",type:"text",placeholder:"Add a comment",value:x,onChange:function(e){return v(e.target.value)}}),Object(n.jsx)(u.a,{className:"post__button",disabled:!x,type:"submit",onClick:function(e){e.preventDefault(),m.collection("posts").doc(i).collection("comments").add({text:x,username:a.displayName,timestamp:j.a.firestore.FieldValue.serverTimestamp()}),v("")},children:"Post"})]})]})};function f(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%, -").concat(50,"%)")}}var x=Object(p.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}})),v=function(){var e=x(),t=Object(s.useState)(f),a=Object(r.a)(t,1)[0],c=Object(s.useState)([]),o=Object(r.a)(c,2),p=o[0],j=o[1],b=Object(s.useState)(!1),O=Object(r.a)(b,2),v=O[0],_=O[1],y=Object(s.useState)(""),N=Object(r.a)(y,2),w=N[0],S=N[1],C=Object(s.useState)(""),I=Object(r.a)(C,2),k=I[0],A=I[1],U=Object(s.useState)(""),E=Object(r.a)(U,2),B=E[0],D=E[1],J=Object(s.useState)(null),F=Object(r.a)(J,2),P=F[0],V=F[1],L=Object(s.useState)(!1),R=Object(r.a)(L,2),T=R[0],z=R[1];Object(s.useEffect)((function(){var e=d.onAuthStateChanged((function(e){e?(console.log(e),V(e)):V(null)}));return function(){e()}}),[P,B]),Object(s.useEffect)((function(){m.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){j(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]);return Object(n.jsxs)("div",{className:"App",children:[Object(n.jsx)(i.a,{open:v,onClose:function(){return _(!1)},children:Object(n.jsx)("div",{style:a,className:e.paper,children:Object(n.jsxs)("form",{className:"app__signup",children:[Object(n.jsx)("center",{children:Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram"})}),Object(n.jsx)(l.a,{placeholder:"username",type:"text",value:B,onChange:function(e){return D(e.target.value)}}),Object(n.jsx)(l.a,{placeholder:"email",type:"text",value:w,onChange:function(e){return S(e.target.value)}}),Object(n.jsx)(l.a,{placeholder:"password",type:"text",value:k,onChange:function(e){return A(e.target.value)}}),Object(n.jsx)(u.a,{type:"submit",onClick:function(e){e.preventDefault(),d.createUserWithEmailAndPassword(w,k).then((function(e){return _(!1),e.user.updateProfile({displayName:B})})).catch((function(e){return alert(e.message)}))},children:"Sign up"})]})})}),Object(n.jsx)(i.a,{open:T,onClose:function(){return z(!1)},children:Object(n.jsx)("div",{style:a,className:e.paper,children:Object(n.jsxs)("form",{className:"app__signup",children:[Object(n.jsx)("center",{children:Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram"})}),Object(n.jsx)(l.a,{placeholder:"email",type:"text",value:w,onChange:function(e){return S(e.target.value)}}),Object(n.jsx)(l.a,{placeholder:"password",type:"text",value:k,onChange:function(e){return A(e.target.value)}}),Object(n.jsx)(u.a,{type:"submit",onClick:function(e){e.preventDefault(),d.signInWithEmailAndPassword(w,k).catch((function(e){return alert(e.message)})),z(!1)},children:"Sign in"})]})})}),Object(n.jsxs)("div",{className:"app__header",children:[Object(n.jsx)("img",{className:"app__headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"instagram"}),P?Object(n.jsx)(u.a,{onClick:function(){return d.signOut()},children:"Logout"}):Object(n.jsxs)("div",{className:"app__logincontainer",children:[Object(n.jsx)(u.a,{onClick:function(){return z(!0)},children:"Sign In"}),Object(n.jsx)(u.a,{onClick:function(){return _(!0)},children:"Sign Up"})]})]}),Object(n.jsx)("div",{className:"app__posts",children:Object(n.jsx)("div",{className:"app__postleft",children:p.map((function(e){var t=e.id,a=e.post;return Object(n.jsx)(h,{postid:t,username:a.username,caption:a.caption,imageUrl:a.imgUrl,user:P},t)}))})}),(null===P||void 0===P?void 0:P.displayName)?Object(n.jsx)(g,{username:P.displayName}):Object(n.jsx)("h3",{children:"Login to upload"})]})};o.a.render(Object(n.jsx)(v,{}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.f6afad3b.chunk.js.map